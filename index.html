<meta charset="utf8" />
<html>
<style>
body {
    background: #f7f7f7;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    margin: 0 40px;
}
</style>
<body>
<script src='sql-wasm-debug.js'></script>
<script>
/* jslint utility2:true */
(async function () {
    "use strict";
    var SQL;
    SQL = await window.initSqlJs({
        locateFile: function (filename, prefix) {
            console.log(`prefix is : ${prefix}`);
            return filename;
        }
    });
    function readTable(database) {
        var row;
        var stmt = database.prepare("SELECT * FROM users");
        stmt.getAsObject({
            $start: 1,
            $end: 1
        });
        stmt.bind({
            $start: 1,
            $end: 2
        });
        while (stmt.step()) {
            row = stmt.getAsObject();
            console.log(row);
        }
    }
    window.handleFiles = async function () {
        var fileDb;
        var fileWal;
        // read file from #inputDb1
        fileDb = new Uint8Array(
            await document.querySelector(
                "#inputDb1"
            ).files[0].arrayBuffer()
        );
        // read file from #inputWal1
        fileWal = new Uint8Array(
            await document.querySelector(
                "#inputWal1"
            ).files[0].arrayBuffer()
        );
        var database = new SQL.Database(fileDb, fileWal);
        readTable(database);
    };
}());
</script>
    <label>.db file</label><br>
    <input type="file" id="inputDb1"/><br>
    <br><br>
    <label>.wal file</label><br>
    <input type="file" id="inputWal1"/><br>
    <br><br>
    <button onclick="window.handleFiles()">
        Click to load .db and optional .wal file
    </button><br>
</body>
